# ุฅุถุงูุฉ Select Box ูููุฏ ุงูููุธู (.emp code)
## Employee Code Mapping Enhancement

### ุงููุตู | Description
ุชู ุฅุถุงูุฉ Select Box ุฌุฏูุฏ ูู ุตูุญุฉ Mapping ูุฅุถุงูุฉ ููุฏ ุงูููุธู (.emp code) ุงูุฐู ูุชู ุญูุธู ูู ุงูุนููุฏ `EmployeeCode` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.

A new Select Box has been added to the Mapping page for employee code (.emp code) that gets saved to the `EmployeeCode` column in the database.

### ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ | New Features

#### 1. ๐ **Select Box ุฌุฏูุฏ ูู Mapping**
- **ุงูุงุณู**: Employee Code (.emp code)
- **ุงููููุน**: ูุณู Column Mapping ูู ุตูุญุฉ ุฅุถุงูุฉ ุงูููุธููู ุงููุชูุฏูุฉ
- **ุงูููุน**: Select Box ูุฑุจุท ุงูุนููุฏ ุงูููุงุณุจ ูู ููู Excel
- **ุงูุญุงูุฉ**: ุงุฎุชูุงุฑู (ุบูุฑ ูุทููุจ)

#### 2. ๐ **Auto-Mapping ุฐูู**
ุงููุธุงู ูุฏุนู ุงูุฃุณูุงุก ุงูุชุงููุฉ ุชููุงุฆูุงู:
- `emp code`
- `employee_code`
- `emp_code`
- `empcode`
- `.emp code`
- `ููุฏ ุงูููุธู`
- `ููุฏ ุงูุนูู`

#### 3. ๐๏ธ **ุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช**
- **ุงูุนููุฏ**: `EmployeeCode`
- **ุงูููุน**: `int(11)`
- **ุงูููู ุงููุณููุญุฉ**: `NULL`
- **ุงููููุน**: ูู ุฌุฏูู `users`

### ุงููููุงุช ุงููุญุฏุซุฉ | Updated Files

#### 1. **Frontend Files**
- `resources/views/users/batch-create-advanced.blade.php`
  - ุฅุถุงูุฉ ุญูู "Employee Code (.emp code)" ุฅูู ูุงุฆูุฉ ุงูุญููู
  - ุชุญุฏูุซ ููุงุนุฏ auto-mapping

- `public/js/batch-create-advanced.js`
  - ุชุญุฏูุซ ููุงุนุฏ auto-mapping
  - ุฅุถุงูุฉ EmployeeCode ุฅูู ุงูุชุญูู ูู ุงูุชูุฑุงุฑ

#### 2. **Backend Files**
- `app/Models/User.php`
  - ุฅุถุงูุฉ `EmployeeCode` ุฅูู ูุงุฆูุฉ ุงูุญููู ุงููุณููุญุฉ (fillable)

- `app/Services/EmployeeDataService.php`
  - ุฅุถุงูุฉ ูุนุงูุฌุฉ ุญูู EmployeeCode
  - ุฅุถุงูุฉ ุงูุชุญูู ูู ุชูุฑุงุฑ EmployeeCode
  - ุชุญุฏูุซ createUserRecord ูุญูุธ EmployeeCode

### ููููุฉ ุงูุงุณุชุฎุฏุงู | How to Use

#### 1. **ุฅุนุฏุงุฏ ููู Excel**
ุชุฃูุฏ ูู ูุฌูุฏ ุนููุฏ ูุญุชูู ุนูู ููุฏ ุงูููุธู ุจุฃุญุฏ ุงูุฃุณูุงุก ุงูุชุงููุฉ:
- `emp code`
- `employee_code`
- `emp_code`
- `empcode`
- `.emp code`
- `ููุฏ ุงูููุธู`
- `ููุฏ ุงูุนูู`

#### 2. **Mapping ุงูุญููู**
1. ุงุฑูุน ููู Excel
2. ูู ูุณู Column Mappingุ ุณุชุฌุฏ ุญูู "Employee Code (.emp code)"
3. ุงุฎุชุฑ ุงูุนููุฏ ุงูููุงุณุจ ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ
4. ุณูุชู auto-mapping ุชููุงุฆูุงู ุฅุฐุง ูุงู ุงุณู ุงูุนููุฏ ูุทุงุจูุงู ููุฃุณูุงุก ุงููุฏุนููุฉ

#### 3. **ุงูุญูุธ**
- ุณูุชู ุญูุธ ููุฏ ุงูููุธู ูู ุงูุนููุฏ `EmployeeCode` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุฅุฐุง ูุงู ููุฏ ุงูููุธู ููุฑุฑุ ุณุชุธูุฑ ุฑุณุงูุฉ ุฎุทุฃ ูุงุถุญุฉ

### ุฃูุซูุฉ ุนูู ุงูุจูุงูุงุช | Data Examples

#### ููู Excel:
```
Name        | Email              | emp code | Department
------------|-------------------|----------|----------
ุฃุญูุฏ ูุญูุฏ   | ahmed@company.com | 1001     | IT
ูุงุทูุฉ ุนูู   | fatima@company.com| 1002     | HR
```

#### ุงููุชูุฌุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```sql
SELECT name, email, EmployeeCode FROM users;
+------------+-------------------+-------------+
| name       | email             | EmployeeCode|
+------------+-------------------+-------------+
| ุฃุญูุฏ ูุญูุฏ  | ahmed@company.com | 1001        |
| ูุงุทูุฉ ุนูู  | fatima@company.com| 1002        |
+------------+-------------------+-------------+
```

### ุงูุชุญูู ูู ุงูุชูุฑุงุฑ | Duplicate Validation

#### ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ:
- ูุชู ูุญุต ุชูุฑุงุฑ EmployeeCode ูุจู ุฅุฑุณุงู ุงูุจูุงูุงุช
- ุฅุฐุง ุชู ุงูุนุซูุฑ ุนูู ุชูุฑุงุฑุ ุชุธูุฑ ูุงูุฐุฉ ููุจุซูุฉ ุฌูููุฉ

#### ูู ุงูุฎุงุฏู:
- ูุชู ุงูุชุญูู ูู ุชูุฑุงุฑ EmployeeCode ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุฅุฐุง ูุงู ููุฑุฑุ ูุชู ุฑูุถ ุงูุญูุธ ูุน ุฑุณุงูุฉ ุฎุทุฃ ูุงุถุญุฉ

### ุฑุณุงุฆู ุงูุฎุทุฃ | Error Messages

#### ุชูุฑุงุฑ EmployeeCode:
- **ุงูุนุฑุจูุฉ**: "ููุฏ ุงูููุธู (.emp code) ูุณุชุฎุฏู ูุณุจูุงู"
- **ุงููููุน**: ูู ุชูุฑูุฑ ุงูุฃุฎุทุงุก ุงูููุตู

### ุงูุชูุงูู | Compatibility

- โ ูุชูุงูู ูุน ุฌููุน ุฅุตุฏุงุฑุงุช ุงููุชุตูุญุงุช ุงูุญุฏูุซุฉ
- โ ูุฏุนู ุงููุบุฉ ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
- โ ูุชูุงูู ูุน ูุธุงู Laravel ุงูุญุงูู
- โ ูุง ูุคุซุฑ ุนูู ุงููุธุงุฆู ุงูููุฌูุฏุฉ
- โ ูุฏุนู auto-mapping ุฐูู

### ุงูุงุฎุชุจุงุฑ | Testing

#### ูุงุฎุชุจุงุฑ ุงููุธููุฉ:
1. ุฃูุดุฆ ููู Excel ูุน ุนููุฏ "emp code" ุฃู ".emp code"
2. ุงุฑูุน ุงูููู ูู ุตูุญุฉ ุฅุถุงูุฉ ุงูููุธููู ุงููุชูุฏูุฉ
3. ุชุฃูุฏ ูู auto-mapping ุงูุตุญูุญ
4. ุงุญูุธ ุงูุจูุงูุงุช ูุชุฃูุฏ ูู ุธููุฑ EmployeeCode ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### ูุงุฎุชุจุงุฑ ุงูุชุญูู ูู ุงูุชูุฑุงุฑ:
1. ุฃูุดุฆ ููู Excel ูุน ููุฏ ููุธู ููุฑุฑ
2. ุชุฃูุฏ ูู ุธููุฑ ุฑุณุงูุฉ ุงูุฎุทุฃ ุงูุฌูููุฉ
3. ุฑุงุฌุน ูุงุฆูุฉ ุงูููุธููู ุงูููุฑุฑูู

### ุงูุฏุนู ุงูุชููู | Technical Support

#### ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```sql
ALTER TABLE users ADD COLUMN EmployeeCode int(11) NULL;
```

#### ูููุฐุฌ ุงูุจูุงูุงุช:
```php
// ูู EmployeeDataService
$cleaned['EmployeeCode'] = trim($employeeData['EmployeeCode'] ?? $employeeData['emp_code'] ?? $employeeData['empcode'] ?? '');

// ูู createUserRecord
'EmployeeCode' => $cleanData['EmployeeCode'] ?? null,
```

#### ุงูุชุญูู ูู ุงูุชูุฑุงุฑ:
```php
if (!empty($cleanData['EmployeeCode']) && User::where('EmployeeCode', $cleanData['EmployeeCode'])->exists()) {
    return [
        'success' => false,
        'error' => 'ููุฏ ุงูููุธู (.emp code) ูุณุชุฎุฏู ูุณุจูุงู',
        'row' => $employeeData['_row_number'] ?? $rowNumber
    ];
}
```

### ุงูุฏุนู | Support

ูู ุญุงูุฉ ููุงุฌูุฉ ุฃู ูุดุงูู:
1. ุชุฃูุฏ ูู ุตุญุฉ ุชูุณูู ููู Excel
2. ุชุญูู ูู ุฃุณูุงุก ุงูุฃุนูุฏุฉ ุงููุฏุนููุฉ
3. ุฑุงุฌุน ุฑุณุงุฆู ุงูุฎุทุฃ ุงูููุตูุฉ
4. ุชุฃูุฏ ูู ูุฌูุฏ ุงูุนููุฏ EmployeeCode ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

**ููุงุญุธุฉ**: ูุฐู ุงูุฅุถุงูุฉ ูุตููุฉ ูุชุญุณูู ุฅุฏุงุฑุฉ ุฃููุงุฏ ุงูููุธููู ูู ูุธุงู StaffTobia CRM.

